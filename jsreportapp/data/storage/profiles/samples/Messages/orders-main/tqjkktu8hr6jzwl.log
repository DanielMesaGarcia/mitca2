{"type":"operationStart","subtype":"profile","data":{"_id":"qpHYB61fV6Cz3i0h","timestamp":"2024-02-19T16:04:12.740Z","state":"queued","mode":"standard","creationDate":"2024-02-19T16:04:12.741Z","modificationDate":"2024-02-19T16:04:12.741Z","shortid":"6YAkb_H","$entitySet":"profiles"},"doDiffs":false,"timestamp":1708358652741,"id":"649fxxjm3by5b9c","previousOperationId":null,"operationId":"dmtt7mzz85xeq00"}
{"type":"log","level":"info","message":"Render request 42 queued for execution and waiting for available worker","previousOperationId":"dmtt7mzz85xeq00","timestamp":1708358652741,"id":"zzf85oc2lp1037g"}
{"type":"operationStart","subtype":"render","name":"orders-main","previousOperationId":"dmtt7mzz85xeq00","timestamp":1708358652749,"id":"a56bp9ntmucbtsj","previousEventId":"649fxxjm3by5b9c","operationId":"maecskuxwthvp3u"}
{"type":"log","timestamp":1708358652749,"level":"info","message":"Starting rendering request 42","meta":{"rootId":"tqjkktu8hr6jzwl","id":"tqjkktu8hr6jzwl"},"id":"npuy0je3ryegi8q","previousOperationId":"maecskuxwthvp3u"}
{"type":"log","timestamp":1708358652750,"level":"info","message":"Rendering template { name: orders-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"tqjkktu8hr6jzwl","id":"tqjkktu8hr6jzwl"},"id":"ni1mdu45h6chfmi","previousOperationId":"maecskuxwthvp3u"}
{"type":"log","timestamp":1708358652752,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"tqjkktu8hr6jzwl","id":"tqjkktu8hr6jzwl"},"id":"qo2yly5svyolghl","previousOperationId":"maecskuxwthvp3u"}
{"type":"log","timestamp":1708358652754,"level":"debug","message":"Executing script orders-script (beforeRender)","meta":{"rootId":"tqjkktu8hr6jzwl","id":"tqjkktu8hr6jzwl"},"id":"rb9h3vvp8351xyp","previousOperationId":"maecskuxwthvp3u"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1708358652781,"id":"0g24pw3vg27umvv","previousEventId":"a56bp9ntmucbtsj","operationId":"dztsqj8jcy9ahs0","previousOperationId":"maecskuxwthvp3u"}
{"type":"operationStart","subtype":"script","name":"scripts orders-script","previousOperationId":"dztsqj8jcy9ahs0","timestamp":1708358652781,"id":"qb1atci9giy0anj","previousEventId":"0g24pw3vg27umvv","operationId":"emiq87f8i6supfz"}
{"type":"log","timestamp":1708358652800,"level":"warn","message":"Error when processing render request 42\n(because) error when evaluating custom script /samples/Messages/orders-script\nCannot read properties of undefined (reading 'map')\n\n(sandbox.js line 15:20)\n\n  13 |\n  14 | function transformData(data) {\n> 15 |   return data.data.map(message => {\n     |                    ^\n  16 |     return {\n  17 |       rows: message.sender\n  18 |     };\n\n(sandbox.js line 25:31)\n\n  23 |   fetchData()\n  24 |     .then(data => {\n> 25 |       const transformedData = transformData(data);\n     |                               ^\n  26 |\n  27 |       req.data = {\n  28 |         orders: transformedData\n\n\nTypeError: Cannot read properties of undefined (reading 'map')\n    at transformData (sandbox.js:15:20)\n    at sandbox.js:25:31\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","meta":{"rootId":"tqjkktu8hr6jzwl","id":"tqjkktu8hr6jzwl"},"id":"3r4zzhbz6u94djy","previousOperationId":"emiq87f8i6supfz"}
{"type":"log","timestamp":1708358652800,"level":"warn","message":"Rendering request 42 finished with error in 61 ms","meta":{"rootId":"tqjkktu8hr6jzwl","id":"tqjkktu8hr6jzwl"},"id":"yfht8fc7kytpzow","previousOperationId":"emiq87f8i6supfz"}
{"type":"error","timestamp":1708358652801,"statusCode":400,"weak":true,"lineNumber":15,"decoratedSuffix":"\n\n(sandbox.js line 15:20)\n\n  13 |\n  14 | function transformData(data) {\n> 15 |   return data.data.map(message => {\n     |                    ^\n  16 |     return {\n  17 |       rows: message.sender\n  18 |     };\n\n(sandbox.js line 25:31)\n\n  23 |   fetchData()\n  24 |     .then(data => {\n> 25 |       const transformedData = transformData(data);\n     |                               ^\n  26 |\n  27 |       req.data = {\n  28 |         orders: transformedData\n\n","entity":{"shortid":"SCNwG8m","name":"orders-script","content":"const axios = require('axios');\n\nfunction fetchData() {\n  const apiUrl = 'http://localhost:3001/messages';\n\n  return axios.get(apiUrl)\n    .then(response => response.data)\n    .catch(error => {\n      console.error('Error fetching data:', error);\n      throw error; \n    });\n}\n\nfunction transformData(data) {\n  return data.data.map(message => {\n    return {\n      rows: message.sender\n    };\n  });\n}\n\nfunction beforeRender(req, res, done) {\n  fetchData()\n    .then(data => {\n      const transformedData = transformData(data);\n\n      req.data = {\n        orders: transformedData\n      };\n\n      done(); \n    })\n    .catch(error => {\n      done(error); \n    });\n}\n"},"property":"content","logged":true,"previousOperationId":"emiq87f8i6supfz","id":"khqyh0oz74w0z5p","stack":"TypeError: Cannot read properties of undefined (reading 'map')\n    at transformData (sandbox.js:15:20)\n    at sandbox.js:25:31\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","message":"Error when evaluating custom script /samples/Messages/orders-script\nCannot read properties of undefined (reading 'map')\n\n(sandbox.js line 15:20)\n\n  13 |\n  14 | function transformData(data) {\n> 15 |   return data.data.map(message => {\n     |                    ^\n  16 |     return {\n  17 |       rows: message.sender\n  18 |     };\n\n(sandbox.js line 25:31)\n\n  23 |   fetchData()\n  24 |     .then(data => {\n> 25 |       const transformedData = transformData(data);\n     |                               ^\n  26 |\n  27 |       req.data = {\n  28 |         orders: transformedData\n\n"}
