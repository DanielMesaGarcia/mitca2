{"type":"operationStart","subtype":"profile","data":{"_id":"NpN9DYPX3Np4wT2c","timestamp":"2024-02-19T16:02:06.657Z","state":"queued","mode":"standard","creationDate":"2024-02-19T16:02:06.658Z","modificationDate":"2024-02-19T16:02:06.658Z","shortid":"QIZ0C6h","$entitySet":"profiles"},"doDiffs":false,"timestamp":1708358526657,"id":"4h8j2x9ce3h8gte","previousOperationId":null,"operationId":"pbu9yy6nhfkqgy4"}
{"type":"log","level":"info","message":"Render request 35 queued for execution and waiting for available worker","previousOperationId":"pbu9yy6nhfkqgy4","timestamp":1708358526657,"id":"wa4bd4c24rpr9v5"}
{"type":"operationStart","subtype":"render","name":"orders-main","previousOperationId":"pbu9yy6nhfkqgy4","timestamp":1708358526665,"id":"hbwew3ela97vgey","previousEventId":"4h8j2x9ce3h8gte","operationId":"h9d5f2bmv7hnia0"}
{"type":"log","timestamp":1708358526665,"level":"info","message":"Starting rendering request 35","meta":{"rootId":"y4slk3hqwvi7rnv","id":"y4slk3hqwvi7rnv"},"id":"jxwpsd7lvzxkht0","previousOperationId":"h9d5f2bmv7hnia0"}
{"type":"log","timestamp":1708358526665,"level":"info","message":"Rendering template { name: orders-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"y4slk3hqwvi7rnv","id":"y4slk3hqwvi7rnv"},"id":"x0z08kakyyjt4ob","previousOperationId":"h9d5f2bmv7hnia0"}
{"type":"log","timestamp":1708358526666,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"y4slk3hqwvi7rnv","id":"y4slk3hqwvi7rnv"},"id":"vkkdttgtga2i5di","previousOperationId":"h9d5f2bmv7hnia0"}
{"type":"log","timestamp":1708358526667,"level":"debug","message":"Executing script orders-script (beforeRender)","meta":{"rootId":"y4slk3hqwvi7rnv","id":"y4slk3hqwvi7rnv"},"id":"393ua4z8wxggxz8","previousOperationId":"h9d5f2bmv7hnia0"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1708358526681,"id":"n1zdt3wg3ja1od4","previousEventId":"hbwew3ela97vgey","operationId":"c68w8vonf0vmai1","previousOperationId":"h9d5f2bmv7hnia0"}
{"type":"operationStart","subtype":"script","name":"scripts orders-script","previousOperationId":"c68w8vonf0vmai1","timestamp":1708358526681,"id":"9is3k5h428amuqv","previousEventId":"n1zdt3wg3ja1od4","operationId":"thi1sqyvsi0svfr"}
{"type":"log","timestamp":1708358526686,"level":"warn","message":"Error when processing render request 35\n(because) error when evaluating custom script /samples/Messages/orders-script\nCannot read properties of undefined (reading 'map')\n\n(sandbox.js line 15:20)\n\n  13 |\n  14 | function transformData(data) {\n> 15 |   return data.data.map(message => {\n     |                    ^\n  16 |     return {\n  17 |       messages: message._id,\n  18 |       rows: message.sender\n\n(sandbox.js line 26:31)\n\n  24 |   fetchData()\n  25 |     .then(data => {\n> 26 |       const transformedData = transformData(data);\n     |                               ^\n  27 |\n  28 |       req.data = {\n  29 |         orders: transformedData\n\n\nTypeError: Cannot read properties of undefined (reading 'map')\n    at transformData (sandbox.js:15:20)\n    at sandbox.js:26:31\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","meta":{"rootId":"y4slk3hqwvi7rnv","id":"y4slk3hqwvi7rnv"},"id":"4btg4ooic78v9kx","previousOperationId":"thi1sqyvsi0svfr"}
{"type":"log","timestamp":1708358526686,"level":"warn","message":"Rendering request 35 finished with error in 30 ms","meta":{"rootId":"y4slk3hqwvi7rnv","id":"y4slk3hqwvi7rnv"},"id":"nwkw40n4fpyp06a","previousOperationId":"thi1sqyvsi0svfr"}
{"type":"error","timestamp":1708358526688,"statusCode":400,"weak":true,"lineNumber":15,"decoratedSuffix":"\n\n(sandbox.js line 15:20)\n\n  13 |\n  14 | function transformData(data) {\n> 15 |   return data.data.map(message => {\n     |                    ^\n  16 |     return {\n  17 |       messages: message._id,\n  18 |       rows: message.sender\n\n(sandbox.js line 26:31)\n\n  24 |   fetchData()\n  25 |     .then(data => {\n> 26 |       const transformedData = transformData(data);\n     |                               ^\n  27 |\n  28 |       req.data = {\n  29 |         orders: transformedData\n\n","entity":{"shortid":"SCNwG8m","name":"orders-script","content":"const axios = require('axios');\n\nfunction fetchData() {\n  const apiUrl = 'http://localhost:3001/messages';\n\n  return axios.get(apiUrl)\n    .then(response => response.data)\n    .catch(error => {\n      console.error('Error fetching data:', error);\n      throw error; \n    });\n}\n\nfunction transformData(data) {\n  return data.data.map(message => {\n    return {\n      messages: message._id,\n      rows: message.sender\n    };\n  });\n}\n\nfunction beforeRender(req, res, done) {\n  fetchData()\n    .then(data => {\n      const transformedData = transformData(data);\n\n      req.data = {\n        orders: transformedData\n      };\n\n      done(); \n    })\n    .catch(error => {\n      done(error); \n    });\n}\n"},"property":"content","logged":true,"previousOperationId":"thi1sqyvsi0svfr","id":"p1emxawy18sndgg","stack":"TypeError: Cannot read properties of undefined (reading 'map')\n    at transformData (sandbox.js:15:20)\n    at sandbox.js:26:31\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","message":"Error when evaluating custom script /samples/Messages/orders-script\nCannot read properties of undefined (reading 'map')\n\n(sandbox.js line 15:20)\n\n  13 |\n  14 | function transformData(data) {\n> 15 |   return data.data.map(message => {\n     |                    ^\n  16 |     return {\n  17 |       messages: message._id,\n  18 |       rows: message.sender\n\n(sandbox.js line 26:31)\n\n  24 |   fetchData()\n  25 |     .then(data => {\n> 26 |       const transformedData = transformData(data);\n     |                               ^\n  27 |\n  28 |       req.data = {\n  29 |         orders: transformedData\n\n"}
