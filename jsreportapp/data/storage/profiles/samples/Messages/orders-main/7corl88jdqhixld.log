{"type":"operationStart","subtype":"profile","data":{"_id":"o2oYOKrAJtZk8U3e","timestamp":"2024-02-21T18:30:30.511Z","state":"queued","mode":"standard","creationDate":"2024-02-21T18:30:30.512Z","modificationDate":"2024-02-21T18:30:30.512Z","shortid":"vfVEi-q","$entitySet":"profiles"},"doDiffs":false,"timestamp":1708540230511,"id":"1c49qeaoj6s0esq","previousOperationId":null,"operationId":"k08cfrpdkudjkd7"}
{"type":"log","level":"info","message":"Render request 12 queued for execution and waiting for available worker","previousOperationId":"k08cfrpdkudjkd7","timestamp":1708540230512,"id":"sm530h5yq48dru0"}
{"type":"operationStart","subtype":"render","name":"orders-main","previousOperationId":"k08cfrpdkudjkd7","timestamp":1708540230547,"id":"a63x22472x0cbxb","previousEventId":"1c49qeaoj6s0esq","operationId":"f1rcj0bj7z4jr8k"}
{"type":"log","timestamp":1708540230549,"level":"info","message":"Starting rendering request 12","meta":{"rootId":"7corl88jdqhixld","id":"7corl88jdqhixld"},"id":"29z3clps1jsm2j9","previousOperationId":"f1rcj0bj7z4jr8k"}
{"type":"log","timestamp":1708540230551,"level":"info","message":"Rendering template { name: orders-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"7corl88jdqhixld","id":"7corl88jdqhixld"},"id":"pmm9amzdcys3ddp","previousOperationId":"f1rcj0bj7z4jr8k"}
{"type":"log","timestamp":1708540230553,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"7corl88jdqhixld","id":"7corl88jdqhixld"},"id":"phuyn85vy4n30k5","previousOperationId":"f1rcj0bj7z4jr8k"}
{"type":"log","timestamp":1708540230554,"level":"debug","message":"Executing script orders-script (beforeRender)","meta":{"rootId":"7corl88jdqhixld","id":"7corl88jdqhixld"},"id":"725fo8cm8phmsir","previousOperationId":"f1rcj0bj7z4jr8k"}
{"type":"log","timestamp":1708540230708,"level":"warn","message":"Error when processing render request 12\n(because) error when evaluating custom script /samples/Messages/orders-script\nUnable to find module ./Message\nThe require calls:\nrequire('./Message')\nrequire('/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/Message')\nrequire('/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/Message')\n\n\n(sandbox.js line 4:17)\n\n  2 | const axios = require('axios');\n  3 | const https = require('https');\n> 4 | const Message = require('./Message'); // Ajusta la ruta según la ubicación de tu archivo Message.js\n    |                 ^\n  5 |\n  6 | function fetchData() {\n  7 |   const apiUrl = 'https://localhost:3001/messages';\n\n\nError: Unable to find module ./Message\nThe require calls:\nrequire('./Message')\nrequire('/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/Message')\nrequire('/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/Message')\n\n    at doRequire (/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:89:11)\n    at sandboxRequire (/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:44:14)\n    at require (/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:89:30)\n    at sandbox.js:4:17","meta":{"rootId":"7corl88jdqhixld","id":"7corl88jdqhixld"},"id":"ctst91ckiopmv0a","previousOperationId":"f1rcj0bj7z4jr8k"}
{"type":"log","timestamp":1708540230708,"level":"warn","message":"Rendering request 12 finished with error in 198 ms","meta":{"rootId":"7corl88jdqhixld","id":"7corl88jdqhixld"},"id":"pwsgdo9vnuaia63","previousOperationId":"f1rcj0bj7z4jr8k"}
{"type":"error","timestamp":1708540230709,"statusCode":400,"weak":true,"decoratedSuffix":"\n\n(sandbox.js line 4:17)\n\n  2 | const axios = require('axios');\n  3 | const https = require('https');\n> 4 | const Message = require('./Message'); // Ajusta la ruta según la ubicación de tu archivo Message.js\n    |                 ^\n  5 |\n  6 | function fetchData() {\n  7 |   const apiUrl = 'https://localhost:3001/messages';\n\n","entity":{"shortid":"MaFAv_l","name":"orders-script","content":"// En el archivo de lógica del servidor (server.js o donde esté implementado)\nconst axios = require('axios');\nconst https = require('https');\nconst Message = require('./Message'); // Ajusta la ruta según la ubicación de tu archivo Message.js\n\nfunction fetchData() {\n  const apiUrl = 'https://localhost:3001/messages';\n  const httpsAgent = new https.Agent({ rejectUnauthorized: false });\n\n  return axios.get(apiUrl, { httpsAgent })\n    .then(response => response.data)\n    .catch(error => {\n      console.error('Error fetching data:', error);\n      throw error;\n    });\n}\n\nfunction transformData(data) {\n  const transformedData = data.map(message => ({\n    country: message._id,\n    user: message.sender,\n    description: message.message,\n    time: message.timestamp,\n  }));\n\n  return {\n    info: transformedData,\n  };\n}\n\nfunction beforeRender(req, res, done) {\n  fetchData()\n    .then(data => {\n      const transformedData = transformData(data);\n      req.data = {\n        orders: transformedData\n      };\n      done();\n    })\n    .catch(error => {\n      res.statusCode = 500;\n      res.end(`Error: ${error.message}`);\n    });\n}\n"},"property":"content","logged":true,"previousOperationId":"f1rcj0bj7z4jr8k","id":"pferegmk5qo6yun","stack":"Error: Unable to find module ./Message\nThe require calls:\nrequire('./Message')\nrequire('/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/Message')\nrequire('/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/Message')\n\n    at doRequire (/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:89:11)\n    at sandboxRequire (/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:44:14)\n    at require (/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:89:30)\n    at sandbox.js:4:17","message":"Error when evaluating custom script /samples/Messages/orders-script\nUnable to find module ./Message\nThe require calls:\nrequire('./Message')\nrequire('/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/Message')\nrequire('/Users/josemiguelbravomendez/Documents/segundo/Proyecto2fase/Mitca/mitca2/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/Message')\n\n\n(sandbox.js line 4:17)\n\n  2 | const axios = require('axios');\n  3 | const https = require('https');\n> 4 | const Message = require('./Message'); // Ajusta la ruta según la ubicación de tu archivo Message.js\n    |                 ^\n  5 |\n  6 | function fetchData() {\n  7 |   const apiUrl = 'https://localhost:3001/messages';\n\n"}
