{"type":"operationStart","subtype":"profile","data":{"_id":"eSQZn4Qf71os81iR","timestamp":"2024-01-17T17:09:59.859Z","state":"queued","mode":"standard","creationDate":"2024-01-17T17:09:59.861Z","modificationDate":"2024-01-17T17:09:59.861Z","shortid":"9MveMsB","$entitySet":"profiles"},"doDiffs":false,"timestamp":1705511399860,"id":"vccz48dfo9przlb","previousOperationId":null,"operationId":"6akkrt9c1xry34s"}
{"type":"log","level":"info","message":"Render request 73 queued for execution and waiting for available worker","previousOperationId":"6akkrt9c1xry34s","timestamp":1705511399860,"id":"14qz80a4s2wfuas"}
{"type":"operationStart","subtype":"render","name":"orders-main","previousOperationId":"6akkrt9c1xry34s","timestamp":1705511399865,"id":"o9ng6gteykzecyv","previousEventId":"vccz48dfo9przlb","operationId":"ye58smfel7es0pl"}
{"type":"log","timestamp":1705511399865,"level":"info","message":"Starting rendering request 73","meta":{"rootId":"0k88b7k2fhcwva7","id":"0k88b7k2fhcwva7"},"id":"hv5vi6ipyrbr4in","previousOperationId":"ye58smfel7es0pl"}
{"type":"log","timestamp":1705511399865,"level":"info","message":"Rendering template { name: orders-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"0k88b7k2fhcwva7","id":"0k88b7k2fhcwva7"},"id":"nz2boow2w3v8h18","previousOperationId":"ye58smfel7es0pl"}
{"type":"log","timestamp":1705511399866,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"0k88b7k2fhcwva7","id":"0k88b7k2fhcwva7"},"id":"eatrkgre1to7pqk","previousOperationId":"ye58smfel7es0pl"}
{"type":"log","timestamp":1705511399867,"level":"debug","message":"Executing script orders-script (beforeRender)","meta":{"rootId":"0k88b7k2fhcwva7","id":"0k88b7k2fhcwva7"},"id":"bvt14qtllf8a6d8","previousOperationId":"ye58smfel7es0pl"}
{"type":"log","timestamp":1705511399880,"level":"warn","message":"Error when processing render request 73\n(because) error when evaluating custom script /samples/Trabajo/orders-script\nUnable to find module jsreport-core\r\nThe require calls:\r\nrequire('jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-cli\\lib\\jsreport-core')\r\n\n\n(sandbox.js line 2:18)\n\n  1 | const axios = require('axios');\n> 2 | const jsreport = require('jsreport-core').jsreport();\n    |                  ^\n  3 |\n  4 | jsreport.use(require('jsreport-handlebars')({\n  5 |   helpers: {\n\n\nError: Unable to find module jsreport-core\r\nThe require calls:\r\nrequire('jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-cli\\lib\\jsreport-core')\r\n\n    at doRequire (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\requireSandbox.js:89:11)\n    at sandboxRequire (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\requireSandbox.js:44:14)\n    at require (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:89:30)\n    at sandbox.js:2:18","meta":{"rootId":"0k88b7k2fhcwva7","id":"0k88b7k2fhcwva7"},"id":"wviduylwvt5qg02","previousOperationId":"ye58smfel7es0pl"}
{"type":"log","timestamp":1705511399880,"level":"warn","message":"Rendering request 73 finished with error in 21 ms","meta":{"rootId":"0k88b7k2fhcwva7","id":"0k88b7k2fhcwva7"},"id":"16w53757egza4wj","previousOperationId":"ye58smfel7es0pl"}
{"type":"error","timestamp":1705511399883,"statusCode":400,"weak":true,"decoratedSuffix":"\n\n(sandbox.js line 2:18)\n\n  1 | const axios = require('axios');\n> 2 | const jsreport = require('jsreport-core').jsreport();\n    |                  ^\n  3 |\n  4 | jsreport.use(require('jsreport-handlebars')({\n  5 |   helpers: {\n\n","entity":{"shortid":"BJX1Jw82ce","name":"orders-script","content":"const axios = require('axios');\nconst jsreport = require('jsreport-core').jsreport();\n\njsreport.use(require('jsreport-handlebars')({\n  helpers: {\n    'JSON.stringify': function(context) {\n      return JSON.stringify(context);\n    }\n  }\n}));\n\nfunction fetchData() {\n  const apiUrl = 'http://localhost:3001/races';\n\n  return axios.get(apiUrl)\n    .then(response => response.data)\n    .catch(error => {\n      console.error('Error fetching data:', error);\n      throw error;\n    });\n}\n\nfunction transformData(data) {\n  return data.data.map(race => {\n    const raceRunners = race.runners.map(runner => ({\n      id: runner._id,\n      name: runner.name,\n      phone: runner.phone,\n    }));\n\n    return {\n      country: race._id,\n      city: race.city,\n      eventDate: race.eventDate,\n      length: race.length,\n      runners: raceRunners,\n      runnerCount: race.runners.length,\n    };\n  });\n}\n\nfunction beforeRender(req, res, done) {\n  fetchData()\n    .then(data => {\n      const transformedData = transformData(data);\n\n      // Assign the transformed data to the 'orders' variable in the template\n      req.data = {\n        orders: transformedData\n      };\n\n      done();\n    })\n    .catch(error => {\n      res.statusCode = 500;\n      res.end(`Error: ${error.message}`);\n    });\n}\n"},"property":"content","logged":true,"previousOperationId":"ye58smfel7es0pl","id":"40r46zb0zavg6dt","stack":"Error: Unable to find module jsreport-core\r\nThe require calls:\r\nrequire('jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-cli\\lib\\jsreport-core')\r\n\n    at doRequire (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\requireSandbox.js:89:11)\n    at sandboxRequire (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\requireSandbox.js:44:14)\n    at require (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:89:30)\n    at sandbox.js:2:18","message":"Error when evaluating custom script /samples/Trabajo/orders-script\nUnable to find module jsreport-core\r\nThe require calls:\r\nrequire('jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-cli\\lib\\jsreport-core')\r\n\n\n(sandbox.js line 2:18)\n\n  1 | const axios = require('axios');\n> 2 | const jsreport = require('jsreport-core').jsreport();\n    |                  ^\n  3 |\n  4 | jsreport.use(require('jsreport-handlebars')({\n  5 |   helpers: {\n\n"}
