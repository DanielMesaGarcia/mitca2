{"type":"operationStart","subtype":"profile","data":{"_id":"eDlW8xhtVi8Kqlf3","timestamp":"2024-01-17T17:09:21.117Z","state":"queued","mode":"standard","creationDate":"2024-01-17T17:09:21.119Z","modificationDate":"2024-01-17T17:09:21.119Z","shortid":"t5QL3ic","$entitySet":"profiles"},"doDiffs":false,"timestamp":1705511361118,"id":"opmza82zyxhh730","previousOperationId":null,"operationId":"iki6d1fq842sdfk"}
{"type":"log","level":"info","message":"Render request 71 queued for execution and waiting for available worker","previousOperationId":"iki6d1fq842sdfk","timestamp":1705511361118,"id":"24oi4o55mcsjoma"}
{"type":"operationStart","subtype":"render","name":"orders-main","previousOperationId":"iki6d1fq842sdfk","timestamp":1705511361123,"id":"0r625tp5f33ckhn","previousEventId":"opmza82zyxhh730","operationId":"rlfry87k46vw8l6"}
{"type":"log","timestamp":1705511361123,"level":"info","message":"Starting rendering request 71","meta":{"rootId":"5e6kd8s3ywrf1y6","id":"5e6kd8s3ywrf1y6"},"id":"289gvpsn85etbhq","previousOperationId":"rlfry87k46vw8l6"}
{"type":"log","timestamp":1705511361124,"level":"info","message":"Rendering template { name: orders-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"5e6kd8s3ywrf1y6","id":"5e6kd8s3ywrf1y6"},"id":"1oxgssdqq9inmon","previousOperationId":"rlfry87k46vw8l6"}
{"type":"log","timestamp":1705511361124,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"5e6kd8s3ywrf1y6","id":"5e6kd8s3ywrf1y6"},"id":"15pcvxsxh7j5tk2","previousOperationId":"rlfry87k46vw8l6"}
{"type":"log","timestamp":1705511361125,"level":"debug","message":"Executing script orders-script (beforeRender)","meta":{"rootId":"5e6kd8s3ywrf1y6","id":"5e6kd8s3ywrf1y6"},"id":"oxi35er4jqmf0p2","previousOperationId":"rlfry87k46vw8l6"}
{"type":"log","timestamp":1705511361138,"level":"warn","message":"Error when processing render request 71\n(because) error when evaluating custom script /samples/Trabajo/orders-script\nUnable to find module jsreport-core\r\nThe require calls:\r\nrequire('jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-cli\\lib\\jsreport-core')\r\n\n\n(sandbox.js line 2:18)\n\n  1 | const axios = require('axios');\n> 2 | const jsreport = require('jsreport-core')();\n    |                  ^\n  3 |\n  4 | jsreport.use(require('jsreport-handlebars')({\n  5 |   helpers: {\n\n\nError: Unable to find module jsreport-core\r\nThe require calls:\r\nrequire('jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-cli\\lib\\jsreport-core')\r\n\n    at doRequire (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\requireSandbox.js:89:11)\n    at sandboxRequire (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\requireSandbox.js:44:14)\n    at require (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:89:30)\n    at sandbox.js:2:18","meta":{"rootId":"5e6kd8s3ywrf1y6","id":"5e6kd8s3ywrf1y6"},"id":"z4efafnxfbwfmth","previousOperationId":"rlfry87k46vw8l6"}
{"type":"log","timestamp":1705511361138,"level":"warn","message":"Rendering request 71 finished with error in 21 ms","meta":{"rootId":"5e6kd8s3ywrf1y6","id":"5e6kd8s3ywrf1y6"},"id":"nvu5zv1qva93mqy","previousOperationId":"rlfry87k46vw8l6"}
{"type":"error","timestamp":1705511361140,"statusCode":400,"weak":true,"decoratedSuffix":"\n\n(sandbox.js line 2:18)\n\n  1 | const axios = require('axios');\n> 2 | const jsreport = require('jsreport-core')();\n    |                  ^\n  3 |\n  4 | jsreport.use(require('jsreport-handlebars')({\n  5 |   helpers: {\n\n","entity":{"shortid":"BJX1Jw82ce","name":"orders-script","content":"const axios = require('axios');\nconst jsreport = require('jsreport-core')();\n\njsreport.use(require('jsreport-handlebars')({\n  helpers: {\n    'JSON.stringify': function(context) {\n      return JSON.stringify(context);\n    }\n  }\n}));\n\nfunction fetchData() {\n  const apiUrl = 'http://localhost:3001/races';\n\n  return axios.get(apiUrl)\n    .then(response => response.data)\n    .catch(error => {\n      console.error('Error fetching data:', error);\n      throw error;\n    });\n}\n\nfunction transformData(data) {\n  return data.data.map(race => {\n    const raceRunners = race.runners.map(runner => ({\n      id: runner._id,\n      name: runner.name,\n      phone: runner.phone,\n    }));\n\n    return {\n      country: race._id,\n      city: race.city,\n      eventDate: race.eventDate,\n      length: race.length,\n      runners: raceRunners,\n      runnerCount: race.runners.length,\n    };\n  });\n}\n\nfunction beforeRender(req, res, done) {\n  fetchData()\n    .then(data => {\n      const transformedData = transformData(data);\n\n      // Assign the transformed data to the 'orders' variable in the template\n      req.data = {\n        orders: transformedData\n      };\n\n      done();\n    })\n    .catch(error => {\n      res.statusCode = 500;\n      res.end(`Error: ${error.message}`);\n    });\n}\n"},"property":"content","logged":true,"previousOperationId":"rlfry87k46vw8l6","id":"3hggr9xxer1z770","stack":"Error: Unable to find module jsreport-core\r\nThe require calls:\r\nrequire('jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-cli\\lib\\jsreport-core')\r\n\n    at doRequire (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\requireSandbox.js:89:11)\n    at sandboxRequire (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\requireSandbox.js:44:14)\n    at require (C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:89:30)\n    at sandbox.js:2:18","message":"Error when evaluating custom script /samples/Trabajo/orders-script\nUnable to find module jsreport-core\r\nThe require calls:\r\nrequire('jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\jsreport-core')\r\nrequire('C:\\Users\\Daniel Mesa\\jsreportapp\\node_modules\\@jsreport\\jsreport-cli\\lib\\jsreport-core')\r\n\n\n(sandbox.js line 2:18)\n\n  1 | const axios = require('axios');\n> 2 | const jsreport = require('jsreport-core')();\n    |                  ^\n  3 |\n  4 | jsreport.use(require('jsreport-handlebars')({\n  5 |   helpers: {\n\n"}
